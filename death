-- Gui to Lua
-- Version: 3.2

-- Instances:

local maingui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TextLabel = Instance.new("TextLabel")
local Close = Instance.new("TextButton")
local Off = Instance.new("TextButton")
local EditorFrame = Instance.new("ScrollingFrame")
local Source = Instance.new("TextBox")
local Comments_ = Instance.new("TextLabel")
local Globals_ = Instance.new("TextLabel")
local Keywords_ = Instance.new("TextLabel")
local RemoteHighlight_ = Instance.new("TextLabel")
local Strings_ = Instance.new("TextLabel")
local Tokens_ = Instance.new("TextLabel")
local Numbers_ = Instance.new("TextLabel")
local SynFrame = Instance.new("Frame")
local Lines = Instance.new("TextLabel")
local TextBox = Instance.new("TextBox")
local ScriptHub = Instance.new("TextButton")
local SaveFile = Instance.new("TextButton")
local Refresh = Instance.new("TextButton")
local Execute = Instance.new("TextButton")
local Clear = Instance.new("TextButton")
local Logo = Instance.new("ImageButton")
local ScriptList = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local Template = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")
local Frame = Instance.new("Frame")
local UIPadding = Instance.new("UIPadding")
local ScriptHub_2 = Instance.new("Frame")
local TextLabel_2 = Instance.new("TextLabel")
local Close_2 = Instance.new("TextButton")
local ScriptFrame = Instance.new("Frame")
local IY = Instance.new("ImageButton")
local TextLabel_3 = Instance.new("TextLabel")
local Backpack = Instance.new("ImageButton")
local TextLabel_4 = Instance.new("TextLabel")

--Properties:

maingui.Name = "maingui"
maingui.Parent = game.CoreGui
maingui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

MainFrame.Name = "MainFrame"
MainFrame.Parent = maingui
MainFrame.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.0912951156, 0, 0.250927061, 0)
MainFrame.Size = UDim2.new(0, 800, 0, 30)

TextLabel.Parent = MainFrame
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1.000
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0.32249999, 0, 0, 0)
TextLabel.Size = UDim2.new(0, 236, 0, 30)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "TankSploitz"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 20.000
TextLabel.TextWrapped = true

Close.Name = "Close"
Close.Parent = MainFrame
Close.BackgroundColor3 = Color3.fromRGB(85, 170, 255)
Close.BackgroundTransparency = 1.000
Close.BorderColor3 = Color3.fromRGB(90, 169, 255)
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.970000029, 0, 0, 0)
Close.Size = UDim2.new(0, 24, 0, 24)
Close.ZIndex = 2
Close.Font = Enum.Font.SourceSans
Close.Text = "X"
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.TextScaled = true
Close.TextSize = 25.000
Close.TextWrapped = true

Off.Name = "Off"
Off.Parent = MainFrame
Off.BackgroundColor3 = Color3.fromRGB(85, 170, 255)
Off.BackgroundTransparency = 1.000
Off.BorderColor3 = Color3.fromRGB(90, 169, 255)
Off.BorderSizePixel = 0
Off.Position = UDim2.new(0.940000057, 0, 0, 0)
Off.Size = UDim2.new(0, 24, 0, 24)
Off.ZIndex = 2
Off.Font = Enum.Font.SourceSans
Off.Text = "-"
Off.TextColor3 = Color3.fromRGB(255, 255, 255)
Off.TextScaled = true
Off.TextSize = 25.000
Off.TextWrapped = true

EditorFrame.Name = "EditorFrame"
EditorFrame.Parent = MainFrame
EditorFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
EditorFrame.BackgroundTransparency = 0.300
EditorFrame.BorderColor3 = Color3.fromRGB(61, 61, 61)
EditorFrame.Position = UDim2.new(0, 36, 0, 42)
EditorFrame.Size = UDim2.new(0, 622, 0, 256)
EditorFrame.ZIndex = 3
EditorFrame.BottomImage = "rbxassetid://148970562"
EditorFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
EditorFrame.HorizontalScrollBarInset = Enum.ScrollBarInset.Always
EditorFrame.MidImage = "rbxassetid://148970562"
EditorFrame.ScrollBarThickness = 6
EditorFrame.TopImage = "rbxassetid://148970562"
EditorFrame.VerticalScrollBarInset = Enum.ScrollBarInset.Always
EditorFrame.VerticalScrollBarPosition = Enum.VerticalScrollBarPosition.Left

Source.Name = "Source"
Source.Parent = EditorFrame
Source.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Source.BackgroundTransparency = 1.000
Source.Size = UDim2.new(1.00365555, 0, 0.975609779, 0)
Source.ZIndex = 3
Source.ClearTextOnFocus = false
Source.Font = Enum.Font.Code
Source.MultiLine = true
Source.PlaceholderColor3 = Color3.fromRGB(204, 204, 204)
Source.Text = ""
Source.TextColor3 = Color3.fromRGB(204, 204, 204)
Source.TextSize = 15.000
Source.TextXAlignment = Enum.TextXAlignment.Left
Source.TextYAlignment = Enum.TextYAlignment.Top

Comments_.Name = "Comments_"
Comments_.Parent = Source
Comments_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comments_.BackgroundTransparency = 1.000
Comments_.Size = UDim2.new(1, 0, 1, 0)
Comments_.ZIndex = 5
Comments_.Font = Enum.Font.Code
Comments_.Text = ""
Comments_.TextColor3 = Color3.fromRGB(59, 200, 59)
Comments_.TextSize = 15.000
Comments_.TextXAlignment = Enum.TextXAlignment.Left
Comments_.TextYAlignment = Enum.TextYAlignment.Top

Globals_.Name = "Globals_"
Globals_.Parent = Source
Globals_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Globals_.BackgroundTransparency = 1.000
Globals_.Size = UDim2.new(1, 0, 1, 0)
Globals_.ZIndex = 5
Globals_.Font = Enum.Font.Code
Globals_.Text = ""
Globals_.TextColor3 = Color3.fromRGB(132, 214, 247)
Globals_.TextSize = 15.000
Globals_.TextXAlignment = Enum.TextXAlignment.Left
Globals_.TextYAlignment = Enum.TextYAlignment.Top

Keywords_.Name = "Keywords_"
Keywords_.Parent = Source
Keywords_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Keywords_.BackgroundTransparency = 1.000
Keywords_.Size = UDim2.new(1, 0, 1, 0)
Keywords_.ZIndex = 5
Keywords_.Font = Enum.Font.Code
Keywords_.Text = ""
Keywords_.TextColor3 = Color3.fromRGB(248, 109, 124)
Keywords_.TextSize = 15.000
Keywords_.TextXAlignment = Enum.TextXAlignment.Left
Keywords_.TextYAlignment = Enum.TextYAlignment.Top

RemoteHighlight_.Name = "RemoteHighlight_"
RemoteHighlight_.Parent = Source
RemoteHighlight_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
RemoteHighlight_.BackgroundTransparency = 1.000
RemoteHighlight_.Size = UDim2.new(1, 0, 1, 0)
RemoteHighlight_.ZIndex = 5
RemoteHighlight_.Font = Enum.Font.Code
RemoteHighlight_.Text = ""
RemoteHighlight_.TextColor3 = Color3.fromRGB(0, 144, 255)
RemoteHighlight_.TextSize = 15.000
RemoteHighlight_.TextXAlignment = Enum.TextXAlignment.Left
RemoteHighlight_.TextYAlignment = Enum.TextYAlignment.Top

Strings_.Name = "Strings_"
Strings_.Parent = Source
Strings_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Strings_.BackgroundTransparency = 1.000
Strings_.Size = UDim2.new(1, 0, 1, 0)
Strings_.ZIndex = 5
Strings_.Font = Enum.Font.Code
Strings_.Text = ""
Strings_.TextColor3 = Color3.fromRGB(173, 241, 149)
Strings_.TextSize = 15.000
Strings_.TextXAlignment = Enum.TextXAlignment.Left
Strings_.TextYAlignment = Enum.TextYAlignment.Top

Tokens_.Name = "Tokens_"
Tokens_.Parent = Source
Tokens_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Tokens_.BackgroundTransparency = 1.000
Tokens_.Size = UDim2.new(1, 0, 1, 0)
Tokens_.ZIndex = 5
Tokens_.Font = Enum.Font.Code
Tokens_.Text = ""
Tokens_.TextColor3 = Color3.fromRGB(255, 255, 255)
Tokens_.TextSize = 15.000
Tokens_.TextXAlignment = Enum.TextXAlignment.Left
Tokens_.TextYAlignment = Enum.TextYAlignment.Top

Numbers_.Name = "Numbers_"
Numbers_.Parent = Source
Numbers_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Numbers_.BackgroundTransparency = 1.000
Numbers_.Size = UDim2.new(1, 0, 1, 0)
Numbers_.ZIndex = 4
Numbers_.Font = Enum.Font.Code
Numbers_.Text = ""
Numbers_.TextColor3 = Color3.fromRGB(255, 198, 0)
Numbers_.TextSize = 15.000
Numbers_.TextXAlignment = Enum.TextXAlignment.Left
Numbers_.TextYAlignment = Enum.TextYAlignment.Top

SynFrame.Name = "SynFrame"
SynFrame.Parent = MainFrame
SynFrame.BackgroundColor3 = Color3.fromRGB(51, 51, 51)
SynFrame.BorderSizePixel = 0
SynFrame.Position = UDim2.new(0, 0, 0.98800987, 0)
SynFrame.Size = UDim2.new(0, 800, 0, 320)

Lines.Name = "Lines"
Lines.Parent = MainFrame
Lines.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Lines.BackgroundTransparency = 1.000
Lines.Position = UDim2.new(0, 0, 1.38204443, 0)
Lines.Size = UDim2.new(0.00822673179, 30, 0.822349548, 0)
Lines.ZIndex = 4
Lines.Font = Enum.Font.Code
Lines.Text = "1"
Lines.TextColor3 = Color3.fromRGB(255, 255, 255)
Lines.TextSize = 15.000
Lines.TextYAlignment = Enum.TextYAlignment.Top

TextBox.Parent = MainFrame
TextBox.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
TextBox.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextBox.BorderSizePixel = 0
TextBox.Position = UDim2.new(0.50000006, 0, 10.2333317, 0)
TextBox.Size = UDim2.new(0, 134, 0, 35)
TextBox.Font = Enum.Font.SourceSans
TextBox.PlaceholderText = "Script Name"
TextBox.Text = ""
TextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
TextBox.TextSize = 25.000

ScriptHub.Name = "ScriptHub"
ScriptHub.Parent = MainFrame
ScriptHub.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
ScriptHub.BorderSizePixel = 0
ScriptHub.Position = UDim2.new(0.676249981, 0, 10.2333317, 0)
ScriptHub.Size = UDim2.new(0, 117, 0, 35)
ScriptHub.ZIndex = 2
ScriptHub.Font = Enum.Font.SourceSans
ScriptHub.Text = "Script Hub"
ScriptHub.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptHub.TextSize = 25.000
ScriptHub.TextWrapped = true

SaveFile.Name = "SaveFile"
SaveFile.Parent = MainFrame
SaveFile.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
SaveFile.BorderSizePixel = 0
SaveFile.Position = UDim2.new(0.352499992, 0, 10.2333317, 0)
SaveFile.Size = UDim2.new(0, 112, 0, 35)
SaveFile.ZIndex = 2
SaveFile.Font = Enum.Font.SourceSans
SaveFile.Text = "Save Script"
SaveFile.TextColor3 = Color3.fromRGB(255, 255, 255)
SaveFile.TextSize = 25.000
SaveFile.TextWrapped = true

Refresh.Name = "Refresh"
Refresh.Parent = MainFrame
Refresh.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
Refresh.BorderSizePixel = 0
Refresh.Position = UDim2.new(0.836250007, 0, 10.2333326, 0)
Refresh.Size = UDim2.new(0, 119, 0, 35)
Refresh.ZIndex = 2
Refresh.Font = Enum.Font.SourceSans
Refresh.Text = "Refresh"
Refresh.TextColor3 = Color3.fromRGB(255, 255, 255)
Refresh.TextSize = 25.000
Refresh.TextWrapped = true

Execute.Name = "Execute"
Execute.Parent = MainFrame
Execute.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
Execute.BorderSizePixel = 0
Execute.Position = UDim2.new(0.0450000018, 0, 10.2333326, 0)
Execute.Size = UDim2.new(0, 114, 0, 35)
Execute.ZIndex = 2
Execute.Font = Enum.Font.SourceSans
Execute.Text = "Execute"
Execute.TextColor3 = Color3.fromRGB(255, 255, 255)
Execute.TextSize = 25.000
Execute.TextWrapped = true

Clear.Name = "Clear"
Clear.Parent = MainFrame
Clear.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
Clear.BorderSizePixel = 0
Clear.Position = UDim2.new(0.198750004, 0, 10.2333317, 0)
Clear.Size = UDim2.new(0, 114, 0, 35)
Clear.ZIndex = 2
Clear.Font = Enum.Font.SourceSans
Clear.Text = "Clear"
Clear.TextColor3 = Color3.fromRGB(255, 255, 255)
Clear.TextSize = 25.000
Clear.TextWrapped = true

Logo.Name = "Logo"
Logo.Parent = MainFrame
Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Logo.BackgroundTransparency = 1.000
Logo.BorderSizePixel = 0
Logo.Position = UDim2.new(0.00749999983, 0, 0, 0)
Logo.Size = UDim2.new(0, 65, 0, 29)
Logo.ZIndex = 2
Logo.Image = "rbxassetid://13895806867"

ScriptList.Name = "ScriptList"
ScriptList.Parent = MainFrame
ScriptList.Active = true
ScriptList.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
ScriptList.BackgroundTransparency = 0.300
ScriptList.BorderColor3 = Color3.fromRGB(0, 0, 0)
ScriptList.BorderSizePixel = 0
ScriptList.Position = UDim2.new(0.835000098, 0, 1.56666613, 0)
ScriptList.Size = UDim2.new(0, 119, 0, 245)
ScriptList.CanvasSize = UDim2.new(0, 0, 100, 0)
ScriptList.ScrollBarThickness = 5

UIListLayout.Parent = ScriptList
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

Template.Name = "Template"
Template.Parent = ScriptList
Template.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Template.BackgroundTransparency = 0.900
Template.BorderSizePixel = 0
Template.Position = UDim2.new(0.0660377368, 0, 0.0166666675, 0)
Template.Size = UDim2.new(1, 0, 0, 30)
Template.Visible = false
Template.AutoButtonColor = false
Template.Font = Enum.Font.SourceSans
Template.Text = "Template"
Template.TextColor3 = Color3.fromRGB(200, 200, 200)
Template.TextSize = 20.000
Template.TextXAlignment = Enum.TextXAlignment.Left

UICorner.CornerRadius = UDim.new(0, 5)
UICorner.Parent = Template

Frame.Parent = Template
Frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Frame.BackgroundTransparency = 0.500
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0, 0, 0.899999976, 0)
Frame.Size = UDim2.new(1, 0, 0, 1)

UIPadding.Parent = ScriptList
UIPadding.PaddingBottom = UDim.new(0, 1)
UIPadding.PaddingLeft = UDim.new(0, 2)
UIPadding.PaddingRight = UDim.new(0, 2)
UIPadding.PaddingTop = UDim.new(0, 1)

ScriptHub_2.Name = "ScriptHub"
ScriptHub_2.Parent = maingui
ScriptHub_2.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
ScriptHub_2.BorderSizePixel = 0
ScriptHub_2.Position = UDim2.new(0.0912951156, 0, 0.250927061, 0)
ScriptHub_2.Size = UDim2.new(0, 800, 0, 30)
ScriptHub_2.Visible = false

TextLabel_2.Parent = ScriptHub_2
TextLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_2.BackgroundTransparency = 1.000
TextLabel_2.BorderSizePixel = 0
TextLabel_2.Position = UDim2.new(0.32249999, 0, 0, 0)
TextLabel_2.Size = UDim2.new(0, 236, 0, 30)
TextLabel_2.Font = Enum.Font.SourceSans
TextLabel_2.Text = "Script Hub"
TextLabel_2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_2.TextSize = 20.000
TextLabel_2.TextWrapped = true

Close_2.Name = "Close"
Close_2.Parent = ScriptHub_2
Close_2.BackgroundColor3 = Color3.fromRGB(85, 170, 255)
Close_2.BackgroundTransparency = 1.000
Close_2.BorderColor3 = Color3.fromRGB(90, 169, 255)
Close_2.BorderSizePixel = 0
Close_2.Position = UDim2.new(0.970000029, 0, 0, 0)
Close_2.Size = UDim2.new(0, 24, 0, 24)
Close_2.ZIndex = 2
Close_2.Font = Enum.Font.SourceSans
Close_2.Text = "X"
Close_2.TextColor3 = Color3.fromRGB(255, 255, 255)
Close_2.TextScaled = true
Close_2.TextSize = 25.000
Close_2.TextWrapped = true

ScriptFrame.Name = "ScriptFrame"
ScriptFrame.Parent = ScriptHub_2
ScriptFrame.BackgroundColor3 = Color3.fromRGB(51, 51, 51)
ScriptFrame.Position = UDim2.new(0, 0, 0.988010168, 0)
ScriptFrame.Size = UDim2.new(0, 800, 0, 320)

IY.Name = "IY"
IY.Parent = ScriptFrame
IY.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
IY.BorderColor3 = Color3.fromRGB(0, 0, 0)
IY.Position = UDim2.new(0.0675000027, 0, 0.0729162246, 0)
IY.Size = UDim2.new(0, 116, 0, 111)
IY.Image = "rbxassetid://16459626435"

TextLabel_3.Parent = IY
TextLabel_3.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_3.BackgroundTransparency = 1.000
TextLabel_3.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_3.BorderSizePixel = 0
TextLabel_3.Position = UDim2.new(0.0344827585, 0, 0.126126125, 0)
TextLabel_3.Size = UDim2.new(0, 108, 0, 21)
TextLabel_3.Font = Enum.Font.SourceSansBold
TextLabel_3.Text = "Infinite Yield"
TextLabel_3.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_3.TextSize = 14.000

Backpack.Name = "Backpack"
Backpack.Parent = ScriptFrame
Backpack.BackgroundColor3 = Color3.fromRGB(34, 34, 34)
Backpack.BorderColor3 = Color3.fromRGB(0, 0, 0)
Backpack.Position = UDim2.new(0.261249989, 0, 0.0729162246, 0)
Backpack.Size = UDim2.new(0, 116, 0, 111)
Backpack.Image = "rbxassetid://6117419859"

TextLabel_4.Parent = Backpack
TextLabel_4.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_4.BackgroundTransparency = 1.000
TextLabel_4.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel_4.BorderSizePixel = 0
TextLabel_4.Position = UDim2.new(0.0344827585, 0, 0.126126125, 0)
TextLabel_4.Size = UDim2.new(0, 108, 0, 21)
TextLabel_4.Font = Enum.Font.SourceSansBold
TextLabel_4.Text = "Backpack Viewer"
TextLabel_4.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_4.TextSize = 14.000




Backpack.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet('https://raw.githubusercontent.com/TankSploitz/KEIG/main/BackpackSearchUI'))()
end)
--loadstring(game:HttpGet('https://raw.githubusercontent.com/TankSploitz/KEIG/main/BackpackSearchUI'))()
-- MAIN SCRIPT UI HANDLER (TEXT COLORING N CRAP)
local lua_keywords = {"and", "break", "do", "else", "elseif", "end", "false", "for", "function", "goto", "if", "in", "local", "nil", "not", "or", "repeat", "return", "then", "true", "until", "while", "is_synapse_function","is_protosmasher_caller", "execute","foreach","foreachi","insert","syn","HttpGet","HttpPost","__index","__namecall","__add","__call","__tostring","__tonumber","__div"}
local global_env = {"getrawmetatable", "game", "workspace", "script", "math", "string", "table", "print", "wait", "BrickColor", "Color3", "next", "pairs", "ipairs", "select", "unpack", "Instance", "Vector2", "Vector3", "CFrame", "Ray", "UDim2", "Enum", "assert", "error", "warn", "tick", "loadstring", "_G", "shared", "getfenv", "setfenv", "newproxy", "setmetatable", "getmetatable", "os", "debug", "pcall", "ypcall", "xpcall", "rawequal", "rawset", "rawget", "tonumber", "tostring", "type", "typeof", "_VERSION", "coroutine", "delay", "require", "spawn", "LoadLibrary", "settings", "stats", "time", "UserSettings", "version", "Axes", "ColorSequence", "Faces", "ColorSequenceKeypoint", "NumberRange", "NumberSequence", "NumberSequenceKeypoint", "gcinfo", "elapsedTime", "collectgarbage", "PhysicalProperties", "Rect", "Region3", "Region3int16", "UDim", "Vector2int16", "Vector3int16","run_secure_function","create_secure_function","hookfunc","hookfunction","newcclosure","replaceclosure","islclosure","getgc","gcinfo","rconsolewarn","rconsoleprint","rconsoleinfo","rconsoleinput","rconsoleinputasync","rconsoleclear","rconsoleerr",}

local src = Source
local lin = Lines

local Highlight = function(string, keywords)
	local K = {}
	local S = string
	local Token =
		{
			["="] = true,
			["."] = true,
			[","] = true,
			["("] = true,
			[")"] = true,
			["["] = true,
			["]"] = true,
			["{"] = true,
			["}"] = true,
			[":"] = true,
			["*"] = true,
			["/"] = true,
			["+"] = true,
			["-"] = true,
			["%"] = true,
			[";"] = true,
			["~"] = true
		}
	for i, v in pairs(keywords) do
		K[v] = true
	end
	S = S:gsub(".", function(c)
		if Token[c] ~= nil then
			return "\32"
		else
			return c
		end
	end)
	S = S:gsub("%S+", function(c)
		if K[c] ~= nil then
			return c
		else
			return (" "):rep(#c)
		end
	end)

	return S
end

local hTokens = function(string)
	local Token =
		{
			["="] = true,
			["."] = true,
			[","] = true,
			["("] = true,
			[")"] = true,
			["["] = true,
			["]"] = true,
			["{"] = true,
			["}"] = true,
			[":"] = true,
			["*"] = true,
			["/"] = true,
			["+"] = true,
			["-"] = true,
			["%"] = true,
			[";"] = true,
			["~"] = true
		}
	local A = ""
	local B = [[]]
	string:gsub(".", function(c)
		if Token[c] ~= nil then
			A = A .. c
		elseif c == "\n" then
			A = A .. "\n"
		elseif c == "\t" then
			A = A .. "\t"
		else
			A = A .. "\32"
		end
	end)
	return A
end


local strings = function(string)
	local highlight = ""
	local quote = false
	string:gsub(".", function(c)
		if quote == false and c == "\"" then
			quote = true
		elseif quote == true and c == "\"" then
			quote = false
		end
		if quote == false and c == "\"" then
			highlight = highlight .. "\""
		elseif c == "\n" then
			highlight = highlight .. "\n"
		elseif c == "\t" then
			highlight = highlight .. "\t"
		elseif quote == true then
			highlight = highlight .. c
		elseif quote == false then
			highlight = highlight .. "\32"
		end
	end)

	return highlight
end

local comments = function(string)
	local ret = ""
	string:gsub("[^\r\n]+", function(c)
		local comm = false
		local i = 0
		c:gsub(".", function(n)
			i = i + 1
			if c:sub(i, i + 1) == "--" then
				comm = true
			end
			if comm == true then
				ret = ret .. n
			else
				ret = ret .. "\32"
			end
		end)
		ret = ret
	end)

	return ret
end

local numbers = function(string)
	local A = ""
	string:gsub(".", function(c)
		if tonumber(c) ~= nil then
			A = A .. c
		elseif c == "\n" then
			A = A .. "\n"
		elseif c == "\t" then
			A = A .. "\t"
		else
			A = A .. "\32"
		end
	end)

	return A
end

local highlight_source = function(type)
	if type == "Text" then
		src.Text = Source.Text:gsub("\13", "")
		src.Text = Source.Text:gsub("\t", "      ")
		local s = src.Text
		src.Keywords_.Text = Highlight(s, lua_keywords)
		src.Globals_.Text = Highlight(s, global_env)
		src.RemoteHighlight_.Text = Highlight(s, {"FireServer", "fireServer", "InvokeServer", "invokeServer"})
		src.Tokens_.Text = hTokens(s)
		src.Numbers_.Text = numbers(s)
		src.Strings_.Text = strings(s)
		local lin = 1
		s:gsub("\n", function()
			lin = lin + 1
		end)
		Lines.Text = ""
		for i = 1, lin do
			Lines.Text = Lines.Text .. i .. "\n"
		end
	end
end

highlight_source("Text")

src.Changed:Connect(highlight_source)

-- Makes the script folder if it doesn't exist

if isfolder("scripts") == true then
	print("Folder found")
else
	makefolder("scripts")
end

-- frame toggle & Key toggle


local userInputService = game:GetService("UserInputService")
userInputService.InputBegan:Connect(function(input, processed)
	if not processed and input.KeyCode == Enum.KeyCode.RightControl then
		MainFrame.Visible = not MainFrame.Visible
	end
end)

--minimize
function minimize()
	MainFrame.Visible = not MainFrame.Visible
end
-- Button crap

function RefreshButtons()
	for _, button in pairs(ScriptList:GetChildren()) do
		if button:IsA("TextButton") and button.Text ~= "Template" then
			button:Destroy()
		end
	end
end

function extractFileName(text)
	local prefix = "scripts\\"
	local _, endIndex = string.find(text, prefix)

	if endIndex then
		return string.sub(text, endIndex + 1)
	else
		return text
	end
end

local function newbuttons()
	RefreshButtons()
	for i, v in pairs(listfiles("scripts")) do
		local newscript = Template:Clone()
		newscript.Visible = true
		newscript.Parent = ScriptList
		newscript.Text = extractFileName(v)
		newscript.MouseButton1Click:Connect(function()

			loadstring(readfile(v))()

		end)
		newscript.MouseButton2Click:Connect(function()

			Source.Text = readfile(v)

		end)
	end
end
-- Starts the button refresh on startup
newbuttons()
-- Refresh button

Refresh.MouseButton1Click:Connect(function()
	newbuttons()
end)

-- Execute button
Execute.MouseButton1Click:Connect(function()
	loadstring(Source.Text)() 
end)
-- Clear Button
Clear.MouseButton1Click:Connect(function()
	Source.Text = ""
end)
Close.MouseButton1Click:Connect(function()
	MainFrame.Visible = not MainFrame.Visible
end)
ScriptHub.MouseButton1Click:Connect(function()
	ScriptHub_2.Visible = not ScriptHub_2.Visible
	ScriptHub_2.Position = MainFrame.Position

	MainFrame.Visible = not MainFrame.Visible
end)

Close_2.MouseButton1Click:Connect(function()
	ScriptHub_2.Visible = not ScriptHub_2.Visible
	MainFrame.Position = ScriptHub_2.Position
	MainFrame.Visible = not MainFrame.Visible
end)

IY.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end)


SaveFile.MouseButton1Click:Connect(function()
	writefile('scripts/'..TextBox.Text..".lua", Source.Text)
	newbuttons()
end)


Off.MouseButton1Click:Connect(function()
	for i,v in pairs(MainFrame:GetChildren()) do
		if v:IsA("Frame") or v:IsA("TextButton") or v:IsA("TextBox") or v:IsA("ScrollingFrame") then
			if v.Name ~= "Off" and v.Name ~= "Close" then
				v.Visible = not v.Visible
				Lines.Visible = not Lines.Visible
			end
		end
	end
end)

-- Drag Script Credits go to whoever the hell  made this script.


local function TICKCA_MF() -- MainFrame.Drag script 
	local script = Instance.new('Folder', MainFrame)

	local UIS = game:GetService("UserInputService")
	function drag (Frame)
		dragToggle = nil
		dragSpeed = 0.23
		dragInput = nil
		dragStart = nil
		dragPos = nil
		function updateInput(input)
			Delta = input.Position - dragStart
			Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + Delta.X, startPos.Y.Scale, startPos.Y.Offset + Delta.Y)
			game:GetService("TweenService"):Create(Frame, TweenInfo.new(0.25), {Position = Position}):Play()
		end
		Frame.InputBegan:Connect(function(input)
			if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) and UIS:GetFocusedTextBox() == nil then
				dragToggle = true
				dragStart = input.Position
				startPos = Frame.Position
				input.Changed:Connect(function()
					if input.UserInputState == Enum.UserInputState.End then
						dragToggle = false
					end
				end)
			end
		end)
		Frame.InputChanged:Connect(function(input)
			if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
				dragInput = input
			end
		end)
		game:GetService("UserInputService").InputChanged:Connect(function(input)
			if input == dragInput and dragToggle then
				updateInput(input)
			end
		end)
	end
	drag(script.Parent)

end



coroutine.wrap(TICKCA_MF)()
